%start S

S[SEM=<app(?vp, ?np)>] -> NP[SEM=?np] VP[SEM=?vp]
S -> NP VP 'et' NP VP

NP -> N | Pronom | N Adj | Art Adj N | Art Nprop
NP[SEM=?nom] -> Art[nombre=?sp, genre=?mf] N[SEM=?nom, nombre=?sp, genre=?mf]
NP[SEM=<?adj>] -> Art[nombre=?sp, genre=?mf] N[nombre=?sp, genre=?mf] Adj[SEM=?adj, nombre=?sp, genre=?mf]

NP -> Art N 'de' NP | Adj N 'de' NP | N 'de' NP | Art N 'qui' VP | Art N 'du' N | NPP 'qui' VP
NPP -> N 'de' Pronom | Art N 'de' Pronom

VP -> V Enum | V NP | V 'de' NP | V NP 'comme' NP
VP[SEM=<app(?v, ?np)>] -> V[SEM=?v] 'dans' NP[SEM=?np]

Enum -> Art NN 'et' N
NN -> N NN | N

V -> 'sont' | 'a' | 'boit' | 'est' | 'fume' | 'habite'
V[SEM=<\x.\s.habiter (s, x)>] -> 'vit'

N[SEM=<personne>, nombre=singulier, genre=masculin] -> 'propriétaire' | 'homme'
N[SEM=<personne>, nombre=singulier, genre=feminin] -> 'personne'
Pronom[SEM=<personne>, nombre=singulier, genre=masculin]  -> 'celui'
Pronom[SEM=<personne>, nombre=singulier, genre=masculin]  -> 'il'

N[SEM=<nationalite(Anglais)>, nombre=singulier, genre=masculin] -> 'anglais'
N[SEM=<nationalite(Suedois)>, nombre=singulier, genre=masculin] -> 'suédois'
N[SEM=<nationalite(Danois)>, nombre=singulier, genre=masculin] -> 'danois'
N[SEM=<nationalite(Norvegien)>, nombre=singulier, genre=masculin] -> 'norvégien'
N[SEM=<nationalite(Allemand)>, nombre=singulier, genre=masculin] -> 'allemand'

N[nombre=pluriel, genre=feminin] -> 'couleurs'
N[nombre=singulier, genre=feminin] -> 'maison'

N[SEM=<couleur(rouge)>, nombre=singulier, genre=masculin] -> 'rouge'
N[SEM=<couleur(jaune)>, nombre=singulier, genre=masculin] -> 'jaune'
N[SEM=<couleur(bleu)>, nombre=singulier, genre=masculin] -> 'bleu'
N[SEM=<couleur(vert)>, nombre=singulier, genre=masculin] -> 'vert'
N[SEM=<couleur(blanc)>, nombre=singulier, genre=masculin] -> 'blanc'

Adj[SEM=<couleur(rouge)>, nombre=singulier, genre=feminin, type=couleur] -> 'rouge'
Adj[SEM=<couleur(jaune)>, nombre=singulier, genre=feminin, type=couleur] -> 'jaune'
Adj[SEM=<couleur(bleu)>, nombre=singulier, genre=feminin, type=couleur] -> 'bleue'
Adj[SEM=<couleur(vert)>, nombre=singulier, genre=feminin, type=couleur] -> 'verte'
Adj[SEM=<couleur(blanc)>, nombre=singulier, genre=feminin, type=couleur] -> 'blanche'

N[nombre=pluriel, genre=masculin] -> 'animaux'

N[SEM=<animal(chien)>, nombre=pluriel, genre=masculin] -> 'chiens'
N[SEM=<animal(oiseau)>, nombre=pluriel, genre=masculin] -> 'oiseaux'
N[SEM=<animal(chat)>, nombre=pluriel, genre=masculin] -> 'chats'
N[SEM=<animal(cheval)>, nombre=singulier, genre=masculin] -> 'cheval'

N[SEM=<the>, nombre=singulier, genre=masculin] -> 'thé'
N[SEM=<cafe>, nombre=singulier, genre=masculin] -> 'café'
N[SEM=<jus_d_orange>, nombre=singulier, genre=masculin] -> 'jus' 'd' 'orange'
N[SEM=<biere>, nombre=singulier, genre=feminin] -> 'bière'
N[SEM=<eau>, nombre=singulier, genre=feminin] -> 'eau'

N[SEM=<\x.position (left (x))>] -> 'à' 'gauche'
N[SEM=<position(3)>] -> 'centre'
N[SEM=<\x.position (left (x)) | position(right (x))>] -> 'à' 'côté'
N[SEM=<\x.position (left (x)) | position(right (x))>, nombre=singulier, genre=masculin] -> 'voisin'
Adj[SEM=<position(1)>, nombre=singulier, genre=feminin] -> 'première'

Nprop[SEM=<Pall_Mall>, nombre=pluriel, genre=masculin] -> 'pall' 'mall'
Nprop[SEM=<Dunhill>, nombre=pluriel, genre=masculin] -> 'dunhill'
Nprop[SEM=<Blend>, nombre=pluriel, genre=masculin] -> 'blend'
Nprop[SEM=<Prince>, nombre=pluriel, genre=masculin] -> 'prince'
Nprop[SEM=<Blue_Master>, nombre=pluriel, genre=masculin] -> 'blue' 'master'

Art[nombre=pluriel] -> 'les' | 'des'
Art[nombre=singulier, genre=masculin] -> 'le' | 'un' | 'du' | 'l'
Art[nombre=singulier, genre=feminin] -> 'la' | 'une' | 'l'

Adj[nombre=pluriel, genre=masculin] -> 'domestiques'
Adj -> 'juste'
